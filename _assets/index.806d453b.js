import{z as e,av as t,E as n,K as a,aw as o,H as r,J as i,g as s,L as u,R as l,ax as c,ay as p,az as d,aA as f,aB as h,aC as m,f as v,b as y,d as g,ac as b,j as C,c as x,_ as N,aD as w,u as E,s as S,e as O,ar as P,i as k,aE as M,aF as V,aG as F,B as I,aH as D,aI as A,F as T,at as K,au as U,a as B}from"./index.4b070c75.js";function j(){}function L(e){e.preventDefault()}var R=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1,_=function(e){return null!=e},z=function(e,t){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)},H=function(c){e(d,c);var p=t(d);function d(e){var t;n(this,d),(t=p.call(this,e)).onKeyDown=function(e){var n=t.props,o=n.onKeyDown,r=n.onPressEnter;if(e.keyCode===a.UP){var i=t.getRatio(e);t.up(e,i,null),t.stop()}else if(e.keyCode===a.DOWN){var s=t.getRatio(e);t.down(e,s,null),t.stop()}else e.keyCode===a.ENTER&&r&&r(e);if(t.recordCursorPosition(),t.lastKeyCode=e.keyCode,o){for(var u=arguments.length,l=new Array(u>1?u-1:0),c=1;c<u;c++)l[c-1]=arguments[c];o.apply(void 0,[e].concat(l))}},t.onKeyUp=function(e){var n=t.props.onKeyUp;if(t.stop(),t.recordCursorPosition(),n){for(var a=arguments.length,o=new Array(a>1?a-1:0),r=1;r<a;r++)o[r-1]=arguments[r];n.apply(void 0,[e].concat(o))}},t.onChange=function(e){var n=t.props.onChange;t.state.focused&&(t.inputting=!0),t.rawInput=t.props.parser(t.getValueFromEvent(e)),t.setState({inputValue:t.rawInput}),n(t.toNumber(t.rawInput))},t.onMouseUp=function(){var e=t.props.onMouseUp;t.recordCursorPosition(),e&&e.apply(void 0,arguments)},t.onFocus=function(){var e;t.setState({focused:!0}),(e=t.props).onFocus.apply(e,arguments)},t.onBlur=function(){var e=t.props.onBlur;t.inputting=!1,t.setState({focused:!1});var n=t.getCurrentValidValue(t.state.inputValue),a=t.setValue(n,j);if(e){var o=t.input.value,r=t.getInputDisplayValue({focus:!1,value:a});t.input.value=r,e.apply(void 0,arguments),t.input.value=o}},t.getRatio=function(e){var t=1;return e.metaKey||e.ctrlKey?t=.1:e.shiftKey&&(t=10),t},t.getFullNum=function(e){return isNaN(e)?e:/e/i.test(String(e))?Number(e).toFixed(18).replace(/\.?0+$/,""):e},t.getPrecision=function(e){if(_(t.props.precision))return t.props.precision;var n=String(e);if(n.indexOf("e-")>=0)return parseInt(n.slice(n.indexOf("e-")+2),10);var a=0;return n.indexOf(".")>=0&&(a=n.length-n.indexOf(".")-1),a},t.getInputDisplayValue=function(e){var n,a=e||t.state,o=a.focused,r=a.inputValue,i=a.value;null==(n=o?r:t.toPrecisionAsStep(i))&&(n="");var s=t.formatWrapper(n);return _(t.props.decimalSeparator)&&(s=s.toString().replace(".",t.props.decimalSeparator)),s},t.recordCursorPosition=function(){try{t.cursorStart=t.input.selectionStart,t.cursorEnd=t.input.selectionEnd,t.currentValue=t.input.value,t.cursorBefore=t.input.value.substring(0,t.cursorStart),t.cursorAfter=t.input.value.substring(t.cursorEnd)}catch(e){}},t.restoreByAfter=function(e){if(void 0===e)return!1;var n=t.input.value,o=n.lastIndexOf(e);if(-1===o)return!1;var r=t.cursorBefore.length;return t.lastKeyCode===a.DELETE&&t.cursorBefore.charAt(r-1)===e[0]?(t.fixCaret(r,r),!0):o+e.length===n.length&&(t.fixCaret(o,o),!0)},t.partRestoreByAfter=function(e){return void 0!==e&&Array.prototype.some.call(e,(function(n,a){var o=e.substring(a);return t.restoreByAfter(o)}))},t.isNotCompleteNumber=function(e){return isNaN(e)||""===e||null===e||e&&e.toString().indexOf(".")===e.toString().length-1},t.stop=function(){t.autoStepTimer&&clearTimeout(t.autoStepTimer)},t.down=function(e,n,a){t.pressingUpOrDown=!0,t.step("down",e,n,a)},t.up=function(e,n,a){t.pressingUpOrDown=!0,t.step("up",e,n,a)},t.saveInput=function(e){t.input=e};var r=e.value;void 0===r&&(r=e.defaultValue),t.state={focused:e.autoFocus};var i=t.getValidValue(t.toNumber(r));return t.state=o(o({},t.state),{},{inputValue:t.toPrecisionAsStep(i),value:i}),t}return r(d,[{key:"componentDidMount",value:function(){this.componentDidUpdate(null)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.value,o=t.onChange,r=t.max,i=t.min,s=this.state.focused;if(e){if(!z(e.value,n)||!z(e.max,r)||!z(e.min,i)){var u,l=s?n:this.getValidValue(n);u=this.pressingUpOrDown?l:this.inputting?this.rawInput:this.toPrecisionAsStep(l),this.setState({value:l,inputValue:u})}var c="value"in this.props?n:this.state.value;"max"in this.props&&e.max!==r&&"number"==typeof c&&c>r&&o&&o(r),"min"in this.props&&e.min!==i&&"number"==typeof c&&c<i&&o&&o(i)}try{if(void 0!==this.cursorStart&&this.state.focused)if(this.partRestoreByAfter(this.cursorAfter)||this.state.value===this.props.value){if(this.currentValue===this.input.value)switch(this.lastKeyCode){case a.BACKSPACE:this.fixCaret(this.cursorStart-1,this.cursorStart-1);break;case a.DELETE:this.fixCaret(this.cursorStart+1,this.cursorStart+1)}}else{var p=this.cursorStart+1;this.cursorAfter?this.lastKeyCode===a.BACKSPACE?p=this.cursorStart-1:this.lastKeyCode===a.DELETE&&(p=this.cursorStart):p=this.input.value.length,this.fixCaret(p,p)}}catch(e){}this.lastKeyCode=null,this.pressingUpOrDown&&this.props.focusOnUpDown&&this.state.focused&&document.activeElement!==this.input&&this.focus()}},{key:"componentWillUnmount",value:function(){this.stop()}},{key:"getCurrentValidValue",value:function(e){var t=e;return t=""===t?"":this.isNotCompleteNumber(parseFloat(t))?this.state.value:this.getValidValue(t),this.toNumber(t)}},{key:"getValueFromEvent",value:function(e){var t=e.target.value.trim().replace(/ã€‚/g,".");return _(this.props.decimalSeparator)&&(t=t.replace(this.props.decimalSeparator,".")),t}},{key:"getValidValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.min,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props.max,a=parseFloat(e);return isNaN(a)?e:(a<t&&(a=t),a>n&&(a=n),a)}},{key:"setValue",value:function(e,t){var n=this.props.precision,a=this.isNotCompleteNumber(parseFloat(e))?null:parseFloat(e),o=this.state.value,r=void 0===o?null:o,i=this.state.inputValue,s=void 0===i?null:i,u="number"==typeof a?a.toFixed(n):"".concat(a),l=a!==r||u!=="".concat(s);return"value"in this.props?(s=this.toPrecisionAsStep(this.state.value),this.setState({inputValue:s},t)):this.setState({value:a,inputValue:this.toPrecisionAsStep(e)},t),l&&this.props.onChange(a),a}},{key:"getMaxPrecision",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.props,a=n.precision,o=n.step;if(_(a))return a;var r=this.getPrecision(t),i=this.getPrecision(o),s=this.getPrecision(e);return e?Math.max(s,r+i):r+i}},{key:"getPrecisionFactor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.getMaxPrecision(e,t);return Math.pow(10,n)}},{key:"focus",value:function(){this.input.focus(),this.recordCursorPosition()}},{key:"blur",value:function(){this.input.blur()}},{key:"select",value:function(){this.input.select()}},{key:"formatWrapper",value:function(e){return this.props.formatter?this.props.formatter(e):e}},{key:"toPrecisionAsStep",value:function(e){if(this.isNotCompleteNumber(e)||""===e)return e;var t=Math.abs(this.getMaxPrecision(e));return isNaN(t)?e.toString():Number(e).toFixed(t)}},{key:"toNumber",value:function(e){var t=this.props.precision,n=this.state.focused,a=e&&e.length>16&&n;return this.isNotCompleteNumber(e)||a?e:_(t)?Math.round(e*Math.pow(10,t))/Math.pow(10,t):Number(e)}},{key:"upStep",value:function(e,t){var n=this.props.step,a=this.getPrecisionFactor(e,t),o=Math.abs(this.getMaxPrecision(e,t)),r=((a*e+a*n*t)/a).toFixed(o);return this.toNumber(r)}},{key:"downStep",value:function(e,t){var n=this.props.step,a=this.getPrecisionFactor(e,t),o=Math.abs(this.getMaxPrecision(e,t)),r=((a*e-a*n*t)/a).toFixed(o);return this.toNumber(r)}},{key:"step",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3?arguments[3]:void 0;this.stop(),t&&(t.persist(),t.preventDefault());var r=this.props;if(!r.disabled){var i=this.getCurrentValidValue(this.state.inputValue)||0;if(!this.isNotCompleteNumber(i)){var s=this["".concat(e,"Step")](i,a),u=s>r.max||s<r.min;s>r.max?s=r.max:s<r.min&&(s=r.min),this.setValue(s,null),r.onStep&&r.onStep(s,{offset:a,type:e}),this.setState({focused:!0},(function(){n.pressingUpOrDown=!1})),u||(this.autoStepTimer=setTimeout((function(){n[e](t,a,!0)}),o?200:600))}}}},{key:"fixCaret",value:function(e,t){if(void 0!==e&&void 0!==t&&this.input&&this.input.value)try{var n=this.input.selectionStart,a=this.input.selectionEnd;e===n&&t===a||this.input.setSelectionRange(e,t)}catch(e){}}},{key:"render",value:function(){var e,t=this.props,n=t.prefixCls,a=t.disabled,o=t.readOnly,r=t.useTouch,c=t.autoComplete,p=t.upHandler,d=t.downHandler,f=t.className,h=t.max,m=t.min,v=t.style,y=t.title,g=t.onMouseEnter,b=t.onMouseLeave,C=t.onMouseOver,x=t.onMouseOut,N=t.required,w=t.onClick,E=t.tabIndex,S=t.type,O=t.placeholder,P=t.id,k=t.inputMode,M=t.pattern,V=t.step,F=t.maxLength,I=t.autoFocus,D=t.name,A=t.onPaste,T=t.onInput,K=i(t,["prefixCls","disabled","readOnly","useTouch","autoComplete","upHandler","downHandler","className","max","min","style","title","onMouseEnter","onMouseLeave","onMouseOver","onMouseOut","required","onClick","tabIndex","type","placeholder","id","inputMode","pattern","step","maxLength","autoFocus","name","onPaste","onInput"]),U=this.state,B=U.value,R=U.focused,_=s(n,(u(e={},f,!!f),u(e,"".concat(n,"-disabled"),a),u(e,"".concat(n,"-focused"),R),e)),z={};Object.keys(K).forEach((function(e){"data-"!==e.substr(0,5)&&"aria-"!==e.substr(0,5)&&"role"!==e||(z[e]=K[e])}));var H=!o&&!a,q=this.getInputDisplayValue(null),W=(B||0===B)&&(isNaN(B)||Number(B)>=h)||a||o,G=(B||0===B)&&(isNaN(B)||Number(B)<=m)||a||o,$=s("".concat(n,"-handler"),"".concat(n,"-handler-up"),u({},"".concat(n,"-handler-up-disabled"),W)),J=s("".concat(n,"-handler"),"".concat(n,"-handler-down"),u({},"".concat(n,"-handler-down-disabled"),G)),X=r?{onTouchStart:W?j:this.up,onTouchEnd:this.stop}:{onMouseDown:W?j:this.up,onMouseUp:this.stop,onMouseLeave:this.stop},Q=r?{onTouchStart:G?j:this.down,onTouchEnd:this.stop}:{onMouseDown:G?j:this.down,onMouseUp:this.stop,onMouseLeave:this.stop};return l.createElement("div",{className:_,style:v,title:y,onMouseEnter:g,onMouseLeave:b,onMouseOver:C,onMouseOut:x,onFocus:function(){return null},onBlur:function(){return null}},l.createElement("div",{className:"".concat(n,"-handler-wrap")},l.createElement("span",Object.assign({unselectable:"on"},X,{role:"button","aria-label":"Increase Value","aria-disabled":W,className:$}),p||l.createElement("span",{unselectable:"on",className:"".concat(n,"-handler-up-inner"),onClick:L})),l.createElement("span",Object.assign({unselectable:"on"},Q,{role:"button","aria-label":"Decrease Value","aria-disabled":G,className:J}),d||l.createElement("span",{unselectable:"on",className:"".concat(n,"-handler-down-inner"),onClick:L}))),l.createElement("div",{className:"".concat(n,"-input-wrap")},l.createElement("input",Object.assign({role:"spinbutton","aria-valuemin":m,"aria-valuemax":h,"aria-valuenow":B,required:N,type:S,placeholder:O,onPaste:A,onClick:w,onMouseUp:this.onMouseUp,className:"".concat(n,"-input"),tabIndex:E,autoComplete:c,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:H?this.onKeyDown:j,onKeyUp:H?this.onKeyUp:j,autoFocus:I,maxLength:F,readOnly:o,disabled:a,max:h,min:m,step:V,name:D,title:y,id:P,onChange:this.onChange,ref:this.saveInput,value:this.getFullNum(q),pattern:M,inputMode:k,onInput:T},z))))}}]),d}(l.Component);H.defaultProps={focusOnUpDown:!0,useTouch:!1,prefixCls:"rc-input-number",max:R,min:-R,step:1,style:{},onChange:j,onKeyDown:j,onPressEnter:j,onFocus:j,onBlur:j,parser:function(e){return e.replace(/[^\w.-]+/g,"")},required:!1,autoComplete:"off"};var q=c((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"}})),W=c((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=p(d),a=f(q),o=f(h),r=function(e,t){return n.createElement(o.default,Object.assign({},e,{ref:t,icon:a.default}))};r.displayName="UpOutlined";var i=n.forwardRef(r);t.default=i})),G=m(c((function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(n=W)&&n.__esModule?n:{default:n};t.default=a,e.exports=a}))),$=v((function(e,t){var n,a=y(g),o=a.getPrefixCls,r=a.direction,i=y(b),u=e.className,l=e.size,c=e.prefixCls,p=e.readOnly,d=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]])}return n}(e,["className","size","prefixCls","readOnly"]),f=o("input-number",c),h=x(G,{className:"".concat(f,"-handler-up-inner")}),m=x(w,{className:"".concat(f,"-handler-down-inner")}),v=l||i,E=s((C(n={},"".concat(f,"-lg"),"large"===v),C(n,"".concat(f,"-sm"),"small"===v),C(n,"".concat(f,"-rtl"),"rtl"===r),C(n,"".concat(f,"-readonly"),p),n),u);return x(H,N({ref:t,className:E,upHandler:h,downHandler:m,prefixCls:f,readOnly:p},d))}));$.defaultProps={step:1};var J=v((function(e,t){var n=E(e.visible),o=S(n,2),r=o[0],i=o[1];O((function(){"visible"in e&&i(e.visible)}),[e.visible]),O((function(){"defaultVisible"in e&&i(e.defaultVisible)}),[e.defaultVisible]);var u=function(t,n){"visible"in e||i(t),e.onVisibleChange&&e.onVisibleChange(t,n)},l=function(t){u(!1,t),e.onConfirm&&e.onConfirm.call(undefined,t)},c=function(t){u(!1,t),e.onCancel&&e.onCancel.call(undefined,t)},p=y(g).getPrefixCls,d=e.prefixCls,f=e.placement,h=e.children,m=e.overlayClassName,v=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]])}return n}(e,["prefixCls","placement","children","overlayClassName"]),b=p("popover",d),C=p("popconfirm",d),w=s(C,m),M=x(V,{componentName:"Popconfirm",defaultLocale:F.Popconfirm},(function(t){return function(t,n){var a,o=e.okButtonProps,r=e.cancelButtonProps,i=e.title,s=e.cancelText,u=e.okText,p=e.okType,d=e.icon;return x("div",{className:"".concat(t,"-inner-content")},x("div",{className:"".concat(t,"-message")},d,x("div",{className:"".concat(t,"-message-title")},(a=i)?"function"==typeof a?a():a:null)),x("div",{className:"".concat(t,"-buttons")},x(I,N({onClick:c,size:"small"},r),s||n.cancelText),x(I,N({onClick:l},D(p),{size:"small"},o),u||n.okText)))}(b,t)}));return x(P,N({},v,{prefixCls:b,placement:f,onVisibleChange:function(t){e.disabled||u(t)},visible:r,overlay:M,overlayClassName:w,ref:t}),k(h,{onKeyDown:function(e){var t,n;A(h)&&(null===(n=null==h?void 0:(t=h.props).onKeyDown)||void 0===n||n.call(t,e)),function(e){e.keyCode===a.ESC&&r&&u(!1,e)}(e)}}))}));J.defaultProps={transitionName:"zoom-big",placement:"top",trigger:"click",okType:"primary",icon:x(M,null),disabled:!1};const X=({editing:e,dataIndex:t,title:n,inputType:a,record:o,index:r,children:i,...s})=>{const u="number"===a?l.createElement($,null):l.createElement(B,null);return l.createElement("td",{...s},e?l.createElement(T.Item,{name:t,style:{margin:0},rules:[{required:!0,message:`Please Input ${n}!`}]},u):i)};export default()=>{const[e]=T.useForm(),[t,n]=E([]),[a,o]=E("");O((()=>(U({}).then((e=>{console.log(e.data),n(e.data.data)})),()=>{})),[]);const r=e=>e.key===a,i=()=>{o("")},s=[{title:"name",dataIndex:"name",width:"25%",editable:!0},{title:"age",dataIndex:"age",width:"15%",editable:!0},{title:"address",dataIndex:"address",width:"40%",editable:!0},{title:"operation",dataIndex:"operation",render:(s,u)=>r(u)?l.createElement("span",null,l.createElement("a",{href:"javascript:;",onClick:()=>(async a=>{try{const r=await e.validateFields(),i=[...t],s=i.findIndex((e=>a===e.key));if(s>-1){const e=i[s];i.splice(s,1,{...e,...r}),n(i),o("")}else i.push(r),n(i),o("")}catch(e){console.log("Validate Failed:",e)}})(u.key),style:{marginRight:8}},"Save"),l.createElement(J,{title:"Sure to cancel?",onConfirm:i},l.createElement("a",null,"Cancel"))):l.createElement("a",{"aria-disabled":""!==a,onClick:()=>(t=>{e.setFieldsValue({name:"",age:"",address:"",...t}),o(t.key)})(u)},"Edit")}].map((e=>e.editable?{...e,onCell:t=>({record:t,inputType:"age"===e.dataIndex?"number":"text",dataIndex:e.dataIndex,title:e.title,editing:r(t)})}:e));return l.createElement(T,{form:e,component:!1},l.createElement(K,{components:{body:{cell:X}},bordered:!0,dataSource:t,columns:s,rowClassName:"editable-row",pagination:{onChange:i}}))};
